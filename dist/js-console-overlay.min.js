class Y{static setStyle(E,w){for(let D in w)E.style[D]=w[D]}static getCurrentTime(){const E=new Date;let w="";return w+=E.getHours().toString().padStart(2,"0"),w+=":",w+=E.getMinutes().toString().padStart(2,"0"),w+=":",w+=E.getSeconds().toString().padStart(2,"0"),w+=":",w+=E.getMilliseconds().toString().padStart(3,"0"),w}static formatData(E,w,D=0){let H="",M=[];if(Array.isArray(E)){H+="[";let X={type:"array",data:[]};for(let j of E){const q=this.formatData(j);H+=q[0]+", ",X.data.push(q[1])}M.push(X),H+="]"}else if(typeof E==="object"){H+="{";let X={type:"object",data:[]};for(let j in E){if(E[j]instanceof Window||j==="window"||j==="view"||j.toLowerCase().includes("target")||j==="srcElement"||j==="toElement"||j==="view")continue;let q=this.formatData(E[j],"object",D+1);H+=`${j}: ${q[0]}, `,X.data.push({key:j,data:q[1]})}M.push(X),H+="}"}else if(typeof E==="number"||typeof E==="bigint")H+=E.toString(),M.push({type:"number",data:E});else if(typeof E==="string"){if(E.toString().startsWith("function "))H+="__fn()";else H+=w==="object"?`"${E}"`:`${E}`;M.push({type:"string",data:E})}else if(typeof E==="boolean")H+=E?"true":"false";else if(typeof E==="function"){const X=E.toString();H+=!X.includes("native code ")?"__fn()":X}else console.info("I DONT KNOW",typeof E);return[H,M]}static formatUrl(E){return E.replace(location.protocol+"//","").replace(location.hostname,"")}static formatSize(E){if(E===0)return"0";let w=E.toString();const D=(H,M)=>{if(E>H)w=`${(E/H).toFixed(2)} ${M}`};return w=`${E} B`,D(1000,"KB"),D(1e6,"MB"),D(1e9,"GB"),w}}class F{createdAt;autohideModifier=0;container;element;#E=null;#D=null;#H=null;#w=null;constructor(E,...w){this.createdAt=Date.now(),this.container=document.createElement("div"),this.element=document.createElement("div"),this.container.appendChild(this.element),this.setBannerStyle(),this.setLogStyle(E),this.setText(E,...w)}changeStyle(E){this.setLogStyle(E)}addText(...E){this.element.innerHTML+=" "+this.generateText(...E)}generateText(...E){let w=[];for(let D of E){const H=Y.formatData(D);w.push(H[0])}return w.join(" ")}setText(E,...w){let D=[Y.getCurrentTime(),this.generateText(...w)];this.element.innerHTML=D.join(" ")}setBannerStyle(){Y.setStyle(this.container,{display:"flex",flexDirection:"column",width:"fit-content",padding:"0px 8px",borderRadius:"2px"}),Y.setStyle(this.element,{display:"flex",alignItems:"center",flexWrap:"wrap",width:"fit-content",transition:"all 0.2s ease-out",gap:"4px"})}setLogStyle(E){let w={};switch(E){case"web-success":w.background="#33aa11";break;case"web-pending":w.background="#4411aa";break;case"log":w.background="#4444cc";break;case"debug":w.background="#777777";break;case"info":w.background="#ffffff",w.color="#000000";break;case"warn":w.background="#998822";break;case"error":case"web-error":w.background="#991111";break;default:break}Y.setStyle(this.element,w),Y.setStyle(this.container,w)}setStackTrace(E){const w=document.createElement("div");Y.setStyle(w,{marginLeft:"10px",fontWeight:"bold"});for(let D of E)w.innerHTML+=`<div>\u2022 ${D}</div>`;this.container.appendChild(w)}setWebProgress(E,w,D){if(this.#H.style.width=E.toString().padStart(3,"0")+"%",this.#D.innerHTML=E+"%",w&&D)if(E===100)this.#w.innerHTML=`(${Y.formatSize(w)})`;else this.#w.innerHTML=`(${Y.formatSize(D)} / ${Y.formatSize(w)})`}createWebProgressDiv(){this.#E=document.createElement("div"),Y.setStyle(this.#E,{display:"flex",alignItems:"center",gap:"5px"});const E=document.createElement("div");E.innerHTML="50";const w=document.createElement("div");Y.setStyle(w,{display:"block",backgroundColor:"",border:"1px solid white",height:"8px",width:"100px",borderRadius:"2px"});const D=document.createElement("div");Y.setStyle(D,{height:"inherit",width:"0px",backgroundColor:"white",transition:"width 0.2s linear",borderRadius:"inherit"}),w.appendChild(D),this.#E.appendChild(w),this.#E.appendChild(E),this.#w=document.createElement("div"),this.#E.appendChild(this.#w),this.#D=E,this.#H=D,this.element.appendChild(this.#E)}}class I{isMouseOver=!1;containerElement=void 0;messages=[];options={maxMessage:100,autohideDelay:10,position:"BOTTOM-LEFT",offsetX:20,offsetY:40,maxHeight:200,maxWidth:0,opacity:0.8};constructor(){this.show(),this.overrideConsole("log"),this.overrideConsole("debug"),this.overrideConsole("info"),this.overrideConsole("warn"),this.overrideConsole("error"),window.onerror=(E,w,D,H,M)=>{this.showLog("error",M?.message,M?.cause,M?.stack)},this.overrideFetch(),this.overrideXmlHttpRequest()}setOptions(E){this.options={...this.options,...E},document.body.removeChild(this.containerElement),this.show()}show(){this.containerElement=this.createContainerElement()}overrideFetch(){const E=this;window.fetch=new Proxy(window.fetch,{async apply(w,D,H){const M=H[0],X=E.showLog("web-pending",M.method,Y.formatUrl(M.url)),j=Date.now();let q=await w.apply(D,H);const G=Date.now()-j;if(!q.ok){const J=await q.clone().text();X.changeStyle("web-error"),X.addText(`[${q.status} ${q.statusText}]`,`[${G}ms]`,J)}else X.changeStyle("web-success"),X.addText(`[${q.status}]`,`[${G}ms]`);return q}})}overrideXmlHttpRequest(){const E=this;XMLHttpRequest.prototype.open=new Proxy(XMLHttpRequest.prototype.open,{apply(w,D,H){w.apply(D,H);const M=E.showLog("web-pending",H[0],Y.formatUrl(H[1]));if(H[0]==="POST")M.createWebProgressDiv(),D.upload.addEventListener("progress",(X)=>{M.setWebProgress(Math.round(X.loaded/X.total*100),X.total,X.loaded),M.autohideModifier+=1000})}})}overrideConsole(E){const w=this;console[E]=new Proxy(console[E],{apply(D,H,M){D.apply(H,M);const X=w.showLog(E,...M);if(E==="error"){const j=Error().stack?.split("\n").filter((q)=>q)??[];X.setStackTrace(j)}}})}createContainerElement(){const E=document.createElement("div");E.id="console-overlay-container";const w={"BOTTOM-LEFT":{bottom:this.options.offsetY+"px",left:this.options.offsetX+"px",flexDirection:"column-reverse"},"TOP-LEFT":{top:this.options.offsetY+"px",left:this.options.offsetX+"px",flexDirection:"column"},"BOTTOM-RIGHT":{bottom:this.options.offsetY+"px",right:this.options.offsetX+"px",flexDirection:"column-reverse"},"TOP-RIGHT":{top:this.options.offsetY+"px",right:this.options.offsetX+"px",flexDirection:"column"}};return Y.setStyle(E,{position:"absolute",display:"flex",gap:"2px",borderRadius:"5px",maxHeight:this.options.maxHeight+"px",overflow:"auto",zIndex:"30000",maxWidth:this.options.maxWidth>10?`${this.options.maxWidth}px`:`calc(100vw - ${this.options.offsetX*2}px)`,opacity:Math.max(0,Math.min(1,this.options.opacity)),fontSize:"0.65rem",fontFamily:"monospace",...w[this.options.position]}),E.addEventListener("mouseenter",()=>{this.isMouseOver=!0}),E.addEventListener("mouseleave",()=>{this.isMouseOver=!1}),this.autohide(),document.body.appendChild(E),E}autohide(){setInterval(()=>{const E=Date.now();for(let w of this.messages)try{if(this.isMouseOver){w.autohideModifier+=1000;continue}if(E-(w.createdAt+w.autohideModifier)>this.options.autohideDelay*1000)this.containerElement.removeChild(w.container),this.messages=this.messages.filter((D)=>D!==w)}catch(D){}},1000)}showLog(E,...w){const D=new F(E,...w);if(this.containerElement.insertBefore(D.container,this.containerElement.firstChild),this.messages.push(D),this.messages.length>=this.options.maxMessage)this.messages=this.messages.slice(-this.options.maxMessage);return D}}Object.assign(window,{overlayConsole:new I});
