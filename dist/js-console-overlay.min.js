class j{static setStyle(w,I){for(let $ in I)w.style[$]=I[$]}static getCurrentTime(){const w=new Date;let I="";return I+=w.getHours().toString().padStart(2,"0"),I+=":",I+=w.getMinutes().toString().padStart(2,"0"),I+=":",I+=w.getSeconds().toString().padStart(2,"0"),I+=":",I+=w.getMilliseconds().toString().padStart(3,"0"),I}static formatData(w,I,$=0){let M="",E=[];if(Array.isArray(w)){M+="[";let z={type:"array",data:[]};for(let q of w){const D=this.formatData(q);M+=D[0]+", ",z.data.push(D[1])}E.push(z),M+="]"}else if(typeof w==="object"){M+="{";let z={type:"object",data:[]};for(let q in w){if(w[q]instanceof Window||q==="window"||q==="view"||q.toLowerCase().includes("target")||q==="srcElement"||q==="toElement"||q==="view")continue;let D=this.formatData(w[q],"object",$+1);M+=`${q}: ${D[0]}, `,z.data.push({key:q,data:D[1]})}E.push(z),M+="}"}else if(typeof w==="number"||typeof w==="bigint")M+=w.toString(),E.push({type:"number",data:w});else if(typeof w==="string"){if(w.toString().startsWith("function "))M+="__fn()";else M+=I==="object"?`"${w}"`:`${w}`;E.push({type:"string",data:w})}else if(typeof w==="boolean")M+=w?"true":"false";else if(typeof w==="function"){const z=w.toString();M+=!z.includes("native code ")?"__fn()":z}else console.info("I DONT KNOW",typeof w);return[M,E]}}class F{createdAt;autohideModifier=0;element;constructor(w,...I){this.createdAt=Date.now(),this.element=document.createElement("div"),this.setBannerStyle(),this.setLogStyle(w),this.setText(w,...I)}changeStyle(w){this.setLogStyle(w)}addText(...w){this.element.innerHTML+=" "+this.generateText(...w)}generateText(...w){let I=[];for(let $ of w){const M=j.formatData($);I.push(M[0])}return I.join(" ")}setText(w,...I){let $=[j.getCurrentTime(),this.generateText(...I)];this.element.innerHTML=$.join(" ")}setBannerStyle(){j.setStyle(this.element,{padding:"0px 8px",borderRadius:"2px",width:"fit-content",transition:"all 0.2s ease-out"})}setLogStyle(w){switch(w){case"web-success":j.setStyle(this.element,{backgroundColor:"#33aa11"});break;case"web-pending":j.setStyle(this.element,{backgroundColor:"#4411aa"});break;case"log":j.setStyle(this.element,{backgroundColor:"#4444cc"});break;case"debug":j.setStyle(this.element,{backgroundColor:"#777777"});break;case"info":j.setStyle(this.element,{backgroundColor:"#ffffff",color:"#000000"});break;case"warn":j.setStyle(this.element,{backgroundColor:"#998822"});break;case"error":case"web-error":j.setStyle(this.element,{backgroundColor:"#991111"});break;default:break}}}class H{isMouseOver=!1;containerElement=void 0;messages=[];options={maxMessage:100,autohideDelay:10,position:"BOTTOM-LEFT",offsetX:20,offsetY:40,maxHeight:200,maxWidth:0};constructor(){this.overrideFetch(),this.overrideConsole("log"),this.overrideConsole("debug"),this.overrideConsole("info"),this.overrideConsole("warn"),this.overrideConsole("error"),this.show()}setOptions(w){this.options={...this.options,...w},document.body.removeChild(this.containerElement),this.show()}show(){this.containerElement=this.createContainerElement()}overrideFetch(){const w=this;window.fetch=new Proxy(window.fetch,{async apply(I,$,M){const E=M[0],z=w.showLog("debug",E.method,E.url.replace(location.protocol+"//","").replace(location.hostname,"")),q=Date.now();let D=await I.apply($,M);const G=Date.now()-q;if(!D.ok){const J=await D.clone().text();z.changeStyle("web-error"),z.addText(`[${D.status} ${D.statusText}]`,`[${G}ms]`,J)}else z.changeStyle("web-success"),z.addText(`[${D.status}]`,`[${G}ms]`);return D}})}overrideConsole(w){const I=this;console[w]=new Proxy(console[w],{apply($,M,E){$.apply(M,E),I.showLog(w,...E)}})}createContainerElement(){const w=document.createElement("div");w.id="console-overlay-container";const I={"BOTTOM-LEFT":{bottom:this.options.offsetY+"px",left:this.options.offsetX+"px",flexDirection:"column-reverse"},"TOP-LEFT":{top:this.options.offsetY+"px",left:this.options.offsetX+"px",flexDirection:"column"},"BOTTOM-RIGHT":{bottom:this.options.offsetY+"px",right:this.options.offsetX+"px",flexDirection:"column-reverse"},"TOP-RIGHT":{top:this.options.offsetY+"px",right:this.options.offsetX+"px",flexDirection:"column"}};return j.setStyle(w,{position:"absolute",display:"flex",gap:"2px",borderRadius:"5px",maxHeight:this.options.maxHeight+"px",overflow:"auto",zIndex:"30000",maxWidth:this.options.maxWidth>10?`${this.options.maxWidth}px`:`calc(100vw - ${this.options.offsetX*2}px)`,opacity:"0.65",fontSize:"0.65rem",fontFamily:"monospace",...I[this.options.position]}),w.addEventListener("mouseenter",()=>{this.isMouseOver=!0}),w.addEventListener("mouseleave",()=>{this.isMouseOver=!1}),this.autohide(),document.body.appendChild(w),w}autohide(){setInterval(()=>{const w=Date.now();for(let I of this.messages){if(this.isMouseOver){I.autohideModifier+=1000;continue}if(w-(I.createdAt+I.autohideModifier)>this.options.autohideDelay*1000)this.containerElement.removeChild(I.element),this.messages=this.messages.filter(($)=>$!==I)}},1000)}showLog(w,...I){const $=new F(w,...I);if(this.containerElement.insertBefore($.element,this.containerElement.firstChild),this.messages.push($),this.messages.length>=this.options.maxMessage)this.messages=this.messages.slice(-this.options.maxMessage);return $}}Object.assign(window,{overlayConsole:new H});
