class F{static setStyle(h,w){for(let E in w)h.style[E]=w[E]}static getCurrentTime(){const h=new Date;let w="";return w+=h.getHours().toString().padStart(2,"0"),w+=":",w+=h.getMinutes().toString().padStart(2,"0"),w+=":",w+=h.getSeconds().toString().padStart(2,"0"),w+=":",w+=h.getMilliseconds().toString().padStart(3,"0"),w}static formatData(h,w){let E="",I=[];if(Array.isArray(h)){E+="[";let M={type:"array",data:[]};for(let X of h){const _=this.formatData(X);E+=_[0]+", ",M.data.push(_[1])}I.push(M),E+="]"}else if(typeof h==="object"){E+="{";let M={type:"object",data:[]};for(let X in h){let _=this.formatData(h[X],"object");E+=`${X}: ${_[0]}, `,M.data.push({key:X,data:_[1]})}I.push(M),E+="}"}else if(typeof h==="number"||typeof h==="bigint")E+=h.toString(),I.push({type:"number",data:h});else if(typeof h==="string"){if(h.toString().startsWith("function "))E+="__fn()";else E+=w==="object"?`"${h}"`:`${h}`;I.push({type:"string",data:h})}else if(typeof h==="boolean")E+=h?"true":"false";else if(typeof h==="function"){const M=h.toString();E+=!M.includes("native code ")?"__fn()":M}else console.info("I DONT KNOW",typeof h);return[E,I]}}class j{createdAt;autohideModifier=0;element;constructor(h,...w){this.createdAt=Date.now(),this.element=document.createElement("div"),this.setBannerStyle(),this.setLogStyle(h),this.setText(h,...w)}changeStyle(h){this.setLogStyle(h)}addText(...h){this.element.innerHTML+=" "+this.generateText(...h)}generateText(...h){let w=[];for(let E of h){const I=F.formatData(E);w.push(I[0])}return w.join(" ")}setText(h,...w){let E=[F.getCurrentTime(),this.generateText(...w)];this.element.innerHTML=E.join(" ")}setBannerStyle(){F.setStyle(this.element,{padding:"0px 8px",borderRadius:"2px",width:"fit-content",transition:"all 0.2s ease-out"})}setLogStyle(h){switch(h){case"web-success":F.setStyle(this.element,{backgroundColor:"#33aa11"});break;case"web-pending":F.setStyle(this.element,{backgroundColor:"#4411aa"});break;case"log":F.setStyle(this.element,{backgroundColor:"#4444cc"});break;case"debug":F.setStyle(this.element,{backgroundColor:"#777777"});break;case"info":F.setStyle(this.element,{backgroundColor:"#ffffff",color:"#000000"});break;case"warn":F.setStyle(this.element,{backgroundColor:"#998822"});break;case"error":case"web-error":F.setStyle(this.element,{backgroundColor:"#991111"});break;default:break}}}class z{isMouseOver=!1;containerElement=void 0;messages=[];options={maxMessage:100,autohideDelay:10,position:"BOTTOM-LEFT",offsetX:20,offsetY:40,maxHeight:200,maxWidth:0};originalFn={log:void 0,debug:void 0,info:void 0,warn:void 0,error:void 0};constructor(){this.storeOriginalFn(),this.overrideFetch(),this.overrideConsole("log"),this.overrideConsole("debug"),this.overrideConsole("info"),this.overrideConsole("warn"),this.overrideConsole("error"),this.show()}setOptions(h){this.options={...this.options,...h},this.originalFn.log(this.options),document.body.removeChild(this.containerElement),this.show()}show(){this.containerElement=this.createContainerElement()}overrideFetch(){const h=this;window.fetch=new Proxy(window.fetch,{async apply(w,E,I){const M=I[0],X=h.showLog("debug",M.method,M.url.replace(location.protocol+"//","").replace(location.hostname,"")),_=Date.now();let $=await w.apply(E,I);const q=Date.now()-_;if(!$.ok){const B=await $.clone().text();X.changeStyle("web-error"),X.addText(`[${$.status} ${$.statusText}]`,`[${q}ms]`,B)}else X.changeStyle("web-success"),X.addText(`[${$.status}]`,`[${q}ms]`);return $}})}overrideConsole(h){const w=this;window.console[h]=function(E,...I){w.originalFn[h].bind(this,E,...I)(),w.showLog(h,E,...I)}}storeOriginalFn(){this.originalFn={log:console.log,info:console.info,debug:console.debug,warn:console.warn,error:console.error,fetch:window.fetch}}createContainerElement(){const h=document.createElement("div");h.id="console-overlay-container";const w={"BOTTOM-LEFT":{bottom:this.options.offsetY+"px",left:this.options.offsetX+"px",flexDirection:"column-reverse"},"TOP-LEFT":{top:this.options.offsetY+"px",left:this.options.offsetX+"px",flexDirection:"column"},"BOTTOM-RIGHT":{bottom:this.options.offsetY+"px",right:this.options.offsetX+"px",flexDirection:"column-reverse"},"TOP-RIGHT":{top:this.options.offsetY+"px",right:this.options.offsetX+"px",flexDirection:"column"}};return F.setStyle(h,{position:"absolute",display:"flex",gap:"2px",borderRadius:"5px",maxHeight:this.options.maxHeight+"px",overflow:"auto",zIndex:"30000",maxWidth:this.options.maxWidth>10?`${this.options.maxWidth}px`:`calc(100vw - ${this.options.offsetX*2}px)`,opacity:"0.65",fontSize:"0.65rem",fontFamily:"monospace",...w[this.options.position]}),h.addEventListener("mouseenter",()=>{this.isMouseOver=!0}),h.addEventListener("mouseleave",()=>{this.isMouseOver=!1}),this.autohide(),document.body.appendChild(h),h}autohide(){setInterval(()=>{const h=Date.now();for(let w of this.messages){if(this.isMouseOver){w.autohideModifier+=1000;continue}if(h-(w.createdAt+w.autohideModifier)>this.options.autohideDelay*1000)this.containerElement.removeChild(w.element),this.messages=this.messages.filter((E)=>E!==w)}},1000)}showLog(h,...w){const E=new j(h,...w);if(this.containerElement.insertBefore(E.element,this.containerElement.firstChild),this.messages.push(E),this.messages.length>=this.options.maxMessage)this.messages=this.messages.slice(-this.options.maxMessage);return E}}Object.assign(window,{overlayConsole:new z});
